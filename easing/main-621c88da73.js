"use strict";function _createForOfIteratorHelper(e,t){var n,r,a,o,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return r=!(n=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return n=e.done,e},e:function(e){r=!0,a=e},f:function(){try{n||null==i.return||i.return()}finally{if(r)throw a}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var canvas=document.getElementById("canvas-editor"),context=canvas.getContext("2d"),playButton=document.getElementById("play"),curve=(canvas.height=400,canvas.width=400,new Curve("#954535")),ball=new Ball(0,20,curve,"#954535"),animation=AnimationGroup.new(),bindEvent=function(){playButton.addEventListener("click",function(){var e=Animation.new({target:ball,property:"x",duration:4,distance:200,direction:AnimationDirectionType.alternate,keyframe:curve.sampling(60)});animation.addAnimation(e)}),canvas.addEventListener("mousedown",function(e){for(var t=e.offsetX,n=e.offsetY,r=(e.button,curve.controlPoints),a=0;a<r.length;a++){var o=r[a];if(hasPoint(t,n,o)){o.enableDrag=!0;break}}}),canvas.addEventListener("mousemove",function(e){var t,n=curve.controlPoints,r=e.offsetX,a=e.offsetY,o=_createForOfIteratorHelper(n);try{for(o.s();!(t=o.n()).done;)(point=t.value).enableDrag&&(point.x=r,point.y=a)}catch(e){o.e(e)}finally{o.f()}curve.getBezierPoints()}),canvas.addEventListener("mouseup",function(e){var t,n=curve.controlPoints,r=(e.offsetX,e.offsetY,_createForOfIteratorHelper(n));try{for(r.s();!(t=r.n()).done;)(point=t.value).enableDrag=!1}catch(e){r.e(e)}finally{r.f()}curve.getBezierPoints()})},__main=function(){bindEvent(),setInterval(function(){curve.update(),ball.update(),animation.update(),context.clearRect(0,0,canvas.width,canvas.height),curve.draw(),ball.draw()},1e3/60)};__main();