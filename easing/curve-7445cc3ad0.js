"use strict";function _createForOfIteratorHelper(t,e){var r,n,i,o,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,i=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw i}}};if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var r;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var Curve=function(){function e(t){_classCallCheck(this,e),this.color=t,this.rect={x:120,y:50,w:200,h:200};t=this.rect;this.controlPoints=[{x:t.x,y:t.y+t.h,enableDrag:!1},{x:t.x+.35*t.w,y:t.y+ +t.h,enableDrag:!1},{x:t.x+.65*t.w,y:t.y+0*t.h,enableDrag:!1},{x:t.x+t.w,y:t.y,enableDrag:!1}],this.bezierPoints=[],this.getBezierPoints(),this.sampling(60)}return _createClass(e,[{key:"getY",value:function(t){for(var e=0;e<this.bezierPoints.length-1;e+=1){var r,n=this.bezierPoints[e],i=this.bezierPoints[e+1];if(n.x>=t&&i.x<=t)return r=(t-i.x)/(n.x-i.x),interpolation(i.y,n.y,r);if(n.x<=t&&i.x>=t)return r=(t-n.x)/(i.x-n.x),interpolation(n.y,i.y,r)}return this.bezierPoints[this.bezierPoints.length-1].y}},{key:"getX",value:function(t){for(var e=0;e<this.bezierPoints.length-1;e+=1){var r,n=this.bezierPoints[e],i=this.bezierPoints[e+1];if(n.y>=t&&i.y<=t)return r=(t-i.y)/(n.y-i.y),interpolation(i.x,n.x,r);if(n.y<=t&&i.y>=t)return r=(t-n.y)/(i.y-n.y),interpolation(n.x,i.x,r)}return this.bezierPoints[this.bezierPoints.length-1].x}},{key:"update",value:function(){}},{key:"sampling",value:function(t){for(var e=this.rect.x,r=this.rect.y,n=this.rect.w,i=this.rect.h,o=[],a=0;a<=t;a+=1){var s=a/t,l=this.getY(s*n+e)-r;o.push({x:s,y:(i-l)/i})}return log(JSON.stringify(o)),o}},{key:"genInterpolation",value:function(t,e){if(t.length<2)return t[0];for(var r=[],n=0;n<t.length-1;n++){var i=t[n],o=t[n+1],i=interpolationPoint(i,o,e);r.push(i)}return this.genInterpolation(r,e)}},{key:"getBezierPoints",value:function(){for(var t=this.controlPoints,e=[],r=0;r<=100;r+=1){var n=this.genInterpolation(t,r/100);e.push(n)}this.bezierPoints=e}},{key:"drawCubicBezierText",value:function(){var t=this.rect,e=this.controlPoints[1],r=1-(e.x-t.x)/t.w,e=1-(e.y-t.y)/t.h,n=this.controlPoints[2],i=1-(n.x-t.x)/t.w,n=1-(n.y-t.y)/t.h,t="cubic-bezier(".concat(r.toFixed(2),", ").concat(e.toFixed(2),", ").concat(i.toFixed(2),", ").concat(n.toFixed(2),")");drawText(context,50,20,t,"#rgb(48, 57, 66)")}},{key:"drawControlPointsPoint",value:function(){var t,e=_createForOfIteratorHelper(this.controlPoints);try{for(e.s();!(t=e.n()).done;){var r=t.value;drawCircle(context,r.x,r.y,5,"lemonchiffon",!0)}}catch(t){e.e(t)}finally{e.f()}var n=this.controlPoints[0],i=this.controlPoints[1],o=this.controlPoints[2],a=this.controlPoints[3];drawLine(context,n.x,n.y,i.x,i.y,!1,"lightslategray"),drawLine(context,o.x,o.y,a.x,a.y,!1,"lightslategray")}},{key:"draw",value:function(){this.drawCubicBezierText();var t=this.rect;drawRect(context,t.x-10,t.y-10,t.w+20,t.h+20,!0,10),this.drawControlPointsPoint(),connectLines(context,this.bezierPoints,"#47C270")}}]),e}();