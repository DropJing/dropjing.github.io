"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var r;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(r){var i=_isNativeReflectConstruct();return function(){var t,e=_getPrototypeOf(r);return _possibleConstructorReturn(this,i?(t=_getPrototypeOf(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cut=function(){_inherits(r,Paint);var e=_createSuper(r);function r(){var t;return _classCallCheck(this,r),(t=e.call(this)).fillType="fillContent",t.isDown=!1,t.begin=[],t.rectW=0,t.rectH=0,t.statusEnum={init:"init",range:"range",move:"move"},t.status=t.statusEnum.init,t.selectArea="",t.offsetX=0,t.offsetY=0,t}return _createClass(r,[{key:"test",value:function(t){t.save(),t.beginPath(),t.rect(100,100,100,100),t.rect(125,125,50,50),t.fillStyle="rgb(255, 128, 64, 0)",t.fill("evenodd"),t.stroke(),t.restore()}},{key:"mousedown",value:function(t,e){t=[t,e];this.isDown=!0,this.status===this.statusEnum.init?(this.begin=t,this.status=this.statusEnum.range):this.status===this.statusEnum.range&&(this.isInRect(t,this.begin,this.rectW,this.rectH)?(this.status=this.statusEnum.move,this.offsetX=t[0]-this.begin[0],this.offsetY=t[1]-this.begin[1]):(this.clear(this.contextDraw),this.context.putImageData(this.selectArea,this.begin[0],this.begin[1]),this.init()))}},{key:"init",value:function(){this.begin=[],this.offsetX=0,this.offsetY=0,this.status=this.statusEnum.init,this.rectW=0,this.rectH=0}},{key:"setRect",value:function(t){var e=this.begin,r=Math.abs(t[0]-e[0]),i=Math.abs(t[1]-e[1]);return this.begin[0]>t[0]&&(this.begin[0]=t[0]),this.begin[1]>t[1]&&(this.begin[1]=t[1]),this.rectW=r,this.rectH=i,[e[0],e[1],r,i]}},{key:"mouseup",value:function(t,e){t=[t,e];if(this.status===this.statusEnum.range){var r,e=this.begin,i=this.setRect(t);if(0===this.rectW||0===this.rectH)return void this.init();this.clear(this.contextDraw),this.drawRect.apply(this,[this.contextDraw].concat(_toConsumableArray(i))),this.selectArea=(r=this.context).getImageData.apply(r,_toConsumableArray(i)),this.fillRect(this.context,e,this.rectW,this.rectH,this.backColor),this.contextDraw.putImageData(this.selectArea,e[0],e[1])}else this.status===this.statusEnum.move&&(this.clear(this.contextDraw),r=t[0]-this.offsetX,i=t[1]-this.offsetY,this.begin=t,this.context.putImageData(this.selectArea,r,i),this.status=this.statusEnum.init,this.init());this.isDown=!1}},{key:"drawRect",value:function(t,e,r,i,n){t.save(),t.setLineDash([5,5]),t.beginPath(),t.rect(e,r,i,n),t.stroke(),t.restore()}},{key:"mousemove",value:function(t,e){var r,i,t=[t,e];this.status===this.statusEnum.range?(e=this.begin,r=t[0]-e[0],i=t[1]-e[1],this.isDown&&(this.clear(this.contextDraw),this.drawRect(this.contextDraw,e[0],e[1],r,i))):this.status===this.statusEnum.move&&this.isDown&&(this.begin,e=this.rectW,r=this.rectH,this.clear(this.contextDraw),i=t[0]-this.offsetX,t=t[1]-this.offsetY,this.drawRect(this.contextDraw,i,t,e,r),this.contextDraw.putImageData(this.selectArea,i,t))}}]),r}();