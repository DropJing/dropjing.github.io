"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var r;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(r){var n=_isNativeReflectConstruct();return function(){var t,e=_getPrototypeOf(r);return _possibleConstructorReturn(this,n?(t=_getPrototypeOf(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Curve=function(){_inherits(r,Paint);var e=_createSuper(r);function r(){var t;return _classCallCheck(this,r),_defineProperty(_assertThisInitialized(t=e.call(this)),"initCurve",function(){t.begin=[],t.end=[],t.points1=[],t.points2=[],t.clickTimes=0}),t.type="curve",t.begin=[],t.end=[],t.points1=[],t.points2=[],t.isDraw=!1,t.clickTimes=0,t.option=new LineWidth(t.lineWidth),t}return _createClass(r,[{key:"changeOption",value:function(t,e){this.option.selectedOption(t,e);t=this.option.lineWidth;this.changelineWidth(t)}},{key:"mousedown",value:function(t,e){this.isDraw=!0,0===this.clickTimes&&(this.begin=[t,e])}},{key:"mouseup",value:function(t,e){var r=this.clickTimes,t=[t,e];this.clear(this.contextDraw),0===r?(this.end=t,this.drawCurve(this.contextDraw,this.begin,this.end,[]),this.clickTimes+=1):1===r?(this.points1=t,this.drawCurve(this.contextDraw,this.begin,this.end,[this.points1]),this.clickTimes+=1):2===r?(this.points2=t,this.drawCurve(this.contextDraw,this.begin,this.end,[this.points1,this.points2]),this.drawCurve(this.context,this.begin,this.end,[this.points1,this.points2]),this.initCurve()):log("不支持高阶"),this.isDraw=!1}},{key:"mousemove",value:function(t,e){var r=this.clickTimes,t=[t,e];this.isDraw&&(this.contextDraw.clearRect(0,0,this.canvasDraw.width,this.canvasDraw.height),0===r?(this.end=t,this.drawCurve(this.contextDraw,this.begin,this.end,[])):1===r?(this.points1=t,this.drawCurve(this.contextDraw,this.begin,this.end,[this.points1])):2===r&&(this.points2=t,this.drawCurve(this.contextDraw,this.begin,this.end,[this.points1,this.points2])))}},{key:"drawCurve",value:function(t,e,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:this.color,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:this.lineWidth;t.save(),t.beginPath(),t.strokeStyle=i,t.lineWidth=o,t.moveTo.apply(t,_toConsumableArray(e)),0===n.length?this.drawLine(t,e,r):1===n.length?(i=n[0],t.quadraticCurveTo.apply(t,_toConsumableArray(i).concat(_toConsumableArray(r)))):2===n.length?(o=n[0],e=n[1],t.bezierCurveTo.apply(t,_toConsumableArray(o).concat(_toConsumableArray(e),_toConsumableArray(r)))):log("现在只支持二阶和三阶的贝塞尔"),t.stroke(),t.restore()}}]),r}();