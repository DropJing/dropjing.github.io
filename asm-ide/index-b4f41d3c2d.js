"use strict";var editors={},breakPoints=[],vm=null;function makeMarker(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="‚óè",e}var initEditor=function(r,t){var n="#id-textarea-".concat(r),n=e(n),i={lineNumbers:!0,mode:"asm",indentUnit:4,cursorHeight:.85,width:400,height:400,lineWrapping:!0,gutters:["CodeMirror-linenumbers","breakpoints"]},n=CodeMirror.fromTextArea(n,i);(editors["".concat(r)]=n).setSize(i.width,i.height),n.setValue(t),n.on("gutterClick",function(e,r){var t=e.lineInfo(r);t.gutterMarkers?(breakPoints.splice(breakPoints.indexOf("info.line"),1),e.setGutterMarker(r,"breakpoints",null)):(e.setGutterMarker(r,"breakpoints",makeMarker()),breakPoints.push(t.line))})},renderRegister=function(r){for(var t="",n=0,i=Object.keys(r);n<i.length;n++){var o=i[n];t+="<tr>\n            <td id='register-".concat(o,"'>").concat(o,"</td>\n            <td>").concat(r[o],"</td>\n        </tr>")}clearAllChildren(e("#register-list")),appendHtml(e("#register-list"),t)},renderMemory=function(r){for(var t="",n=0;n<1024;n++){var i=r[n];t+="<tr id='memory-".concat(n,"'>\n            <td>").concat(n,"</td>\n            <td>").concat(i,"</td>\n        </tr>")}clearAllChildren(e("#memory-list")),appendHtml(e("#memory-list"),t)},bindEvents=function(){e("#btn-compile").addEventListener("click",function(r){var t=editors.hvbm.getValue(),n=machineCode(t,breakPoints)[0],t=machineCode(t,breakPoints)[1];vm=new AxePU(n,t),toggleClass(e("#btn-run"),"disabled"),toggleClass(e("#btn-run-step"),"disabled"),toggleClass(e("#btn-run-point"),"disabled")}),e("#btn-run").addEventListener("click",function(e){vm.run(),renderRegister(vm.register),renderMemory(vm.memory)}),e("#btn-run-step").addEventListener("click",function(e){vm.runStep(),renderRegister(vm.register),renderMemory(vm.memory)}),e("#btn-run-point").addEventListener("click",function(e){vm.runPoint(),renderRegister(vm.register),renderMemory(vm.memory)})},init=function(){renderRegister({pa:0,a1:0,a2:0,a3:0,c1:0,f1:0});for(var e=[],r=0;r<1024;r++)e.push(0);renderMemory(e);initEditor("hvbm","set2 a1 1\nset2 a2 2\nhalt")},__main=function(){init(),bindEvents()};__main();